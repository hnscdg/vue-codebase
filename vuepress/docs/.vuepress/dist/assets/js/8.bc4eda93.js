(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{362:function(e,t,n){"use strict";n.r(t);var i=n(42),o=Object(i.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"å†™åœ¨å‰é¢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å†™åœ¨å‰é¢"}},[e._v("#")]),e._v(" å†™åœ¨å‰é¢")]),e._v(" "),n("p",[e._v("å…³äºè½¯ä»¶æ¶æ„æ¨¡å¼ï¼ˆç¡®åˆ‡çš„è¯´æ˜¯ä¸€ç§è½¯ä»¶ç¼–ç è§„èŒƒæˆ–è€…è½¯ä»¶å¼€å‘æ¨¡å¼ï¼‰ï¼Œè¿™å‡ å¹´éª‚æˆ˜ä¸æ–­ã€‚äº‰è®ºçš„ç„¦ç‚¹ä¸»è¦æ˜¯åœ¨MVCã€MVVMã€MVPå“ªç§æ¶æ„æœ€å¥½ï¼Œå“ªç§æ¶æ„æ‰æ˜¯æœ€ç‰›é€¼çš„ã€æ‰©å±•æ€§æ›´å¼ºçš„ã€å¯ç»´æŠ¤æ€§æ›´é«˜çš„ã€‚ç¬”è€…ä¸æ‰ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¾ˆå°‘ç”¨è¿‡MVPæ¶æ„ï¼Œå¯¹äºMVPçš„æŒæ¡ä¹Ÿæ˜¯åªåœç•™åœ¨å†™å†™Demoé˜¶æ®µã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦ç€é‡ä»‹ç»ä¸‹MVVMæ¶æ„åœ¨çœŸå®é¡¹ç›®å½“ä¸­çš„åº”ç”¨ï¼Œä»¥åŠæŠ›å¼€RACï¼Œæˆ‘ä»¬å¦‚ä½•è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªViewå’ŒViewModelä¹‹é—´çš„ç»‘å®šæ¡†æ¶ã€‚")]),e._v(" "),n("h2",{attrs:{id:"mvvmæ‰«ç›²"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvvmæ‰«ç›²"}},[e._v("#")]),e._v(" MVVMæ‰«ç›²")]),e._v(" "),n("blockquote",[n("p",[e._v("MVVMï¼ˆModelâ€“Viewâ€“Viewmodelï¼‰æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„æ¨¡å¼ã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("MVVMæœ‰åŠ©äºå°†å›¾å½¢ç”¨æˆ·ç•Œé¢çš„å¼€å‘ä¸ä¸šåŠ¡é€»è¾‘æˆ–åç«¯é€»è¾‘ï¼ˆæ•°æ®æ¨¡å‹ï¼‰çš„å¼€å‘åˆ†ç¦»å¼€æ¥ï¼Œè¿™æ˜¯é€šè¿‡ç½®æ ‡è¯­è¨€æˆ–GUIä»£ç å®ç°çš„ã€‚MVVMçš„è§†å›¾æ¨¡å‹æ˜¯ä¸€ä¸ªå€¼è½¬æ¢å™¨ï¼Œ è¿™æ„å‘³ç€è§†å›¾æ¨¡å‹è´Ÿè´£ä»æ¨¡å‹ä¸­æš´éœ²ï¼ˆè½¬æ¢ï¼‰æ•°æ®å¯¹è±¡ï¼Œä»¥ä¾¿è½»æ¾ç®¡ç†å’Œå‘ˆç°å¯¹è±¡ã€‚åœ¨è¿™æ–¹é¢ï¼Œè§†å›¾æ¨¡å‹æ¯”è§†å›¾åšå¾—æ›´å¤šï¼Œå¹¶ä¸”å¤„ç†å¤§éƒ¨åˆ†è§†å›¾çš„æ˜¾ç¤ºé€»è¾‘ã€‚ è§†å›¾æ¨¡å‹å¯ä»¥å®ç°ä¸­ä»‹è€…æ¨¡å¼ï¼Œç»„ç»‡å¯¹è§†å›¾æ‰€æ”¯æŒçš„ç”¨ä¾‹é›†çš„åç«¯é€»è¾‘çš„è®¿é—®ã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("MVVMæ˜¯é©¬ä¸Â·ç¦å‹’çš„PMï¼ˆPresentation Modelï¼‰è®¾è®¡æ¨¡å¼çš„å˜ä½“ã€‚ MVVMä»¥ç›¸åŒçš„æ–¹å¼æŠ½è±¡å‡ºè§†å›¾çš„çŠ¶æ€å’Œè¡Œä¸º,ä½†PMä»¥ä¸ä¾èµ–äºç‰¹å®šç”¨æˆ·ç•Œé¢å¹³å°çš„æ–¹å¼æŠ½è±¡å‡ºè§†å›¾ï¼ˆåˆ›å»ºäº†è§†å›¾æ¨¡å‹ï¼‰ã€‚\nMVVMå’ŒPMéƒ½æ¥è‡ªMVCæ¨¡å¼ã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("MVVMç”±å¾®è½¯æ¶æ„å¸ˆKen Cooperå’ŒTed Peterså¼€å‘ï¼Œé€šè¿‡åˆ©ç”¨WPFï¼ˆå¾®è½¯.NETå›¾å½¢ç³»ç»Ÿï¼‰å’ŒSilverlightï¼ˆWPFçš„äº’è”ç½‘åº”ç”¨æ´¾ç”Ÿå“ï¼‰çš„ç‰¹æ€§æ¥ç®€åŒ–ç”¨æˆ·ç•Œé¢çš„äº‹ä»¶é©±åŠ¨ç¨‹åºè®¾è®¡ã€‚ å¾®è½¯çš„WPFå’ŒSilverlightæ¶æ„å¸ˆä¹‹ä¸€John Gossmanäº2005å¹´åœ¨ä»–çš„åšå®¢ä¸Šå‘è¡¨äº†MVVMã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("MVVMä¹Ÿè¢«ç§°ä¸ºmodel-view-binderï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸æ¶‰åŠ.NETå¹³å°çš„å®ç°ä¸­ã€‚ZKï¼ˆJavaå†™çš„ä¸€ä¸ªWebåº”ç”¨æ¡†æ¶ï¼‰å’ŒKnockoutJSï¼ˆä¸€ä¸ªJavaScriptåº“ï¼‰ä½¿ç”¨model-view-binderã€‚")])]),e._v(" "),n("p",[e._v("ä»¥ä¸Šå†…å®¹å‡æ¥è‡ªç»´åŸºç™¾ç§‘ã€‚"),n("a",{attrs:{href:"https://zh.wikipedia.org/wiki/MVVM",target:"_blank",rel:"noopener noreferrer"}},[e._v("MVVM wikipedia"),n("OutboundLink")],1),e._v("ã€‚")]),e._v(" "),n("p",[e._v("ç®€å•çš„è®²ï¼ŒMVVMæ˜¯MVCçš„æ”¹è¿›ç‰ˆã€‚æˆ‘ä»¬éƒ½çŸ¥é“MVCè½¯ä»¶æ¶æ„æ¨¡å¼æ˜¯è‹¹æœæ¨èçš„å¼€å‘æ¨¡å¼ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("MVC")]),e._v("ä¸­çš„"),n("strong",[e._v("M")]),e._v("å°±æ˜¯å•çº¯çš„ä»ç½‘ç»œè·å–å›æ¥çš„æ•°æ®æ¨¡å‹ï¼Œ"),n("strong",[e._v("V")]),e._v("æŒ‡çš„æˆ‘ä»¬çš„è§†å›¾ç•Œé¢ï¼Œè€Œ"),n("strong",[e._v("C")]),e._v("å°±æ˜¯æˆ‘ä»¬çš„ViewControllerã€‚")]),e._v(" "),n("p",[e._v("åœ¨å…¶ä¸­ï¼ŒViewControllerè´Ÿè´£Viewå’ŒModelä¹‹é—´è°ƒåº¦ï¼ŒViewå‘ç”Ÿäº¤äº’äº‹ä»¶ä¼šé€šè¿‡target-actionæˆ–è€…delegateæ–¹å¼å›è°ƒç»™ViewControllerï¼Œä¸æ­¤åŒæ—¶ViewControllerè¿˜è¦æ‰¿æ‹…æŠŠModelé€šè¿‡KVOã€Notificationæ–¹å¼ä¼ æ¥çš„æ•°æ®ä¼ è¾“ç»™Viewç”¨äºå±•ç¤ºçš„è´£ä»»ã€‚***éšç€ä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚ï¼Œè§†å›¾äº¤äº’è¶Šå¤æ‚ï¼Œå¯¼è‡´Controllerè¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œè´Ÿé‡å‰è¡Œã€‚è„æ´»ç´¯æ´»éƒ½å®ƒå¹²äº†ï¼Œåˆ°å¤´æ¥è¿˜ä¸€ç‚¹ä¸è®¨å¥½ã€‚ç¦æŠ¥ä¿®å¤šäº†çš„ç»“æœå°±æ˜¯ï¼Œä¸è¡Œäº†å°±é‡æ„ä½ ï¼Œé‡æ„ä¸äº†å°±æ¢æ‰ä½ ã€‚***ğŸ˜…")]),e._v(" "),n("p",[e._v("æ¥ä¸€å¼ æ–¯å¦ç¦è€å¤´ç»å…¸çš„MVCæ¶æ„å›¾ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/Lobster-King/AppArticles/master/Architecture/mvc-arch.jpg",alt:""}})]),e._v(" "),n("p",[e._v("æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒMVVMå°±é—ªäº®ç™»åœºäº†ã€‚ä»–æŠŠViewå’ŒContrlleréƒ½æ”¾åœ¨äº†Viewå±‚ï¼ˆç›¸å½“äºæŠŠControllerä¸€éƒ¨åˆ†é€»è¾‘æŠ½ç¦»äº†å‡ºæ¥ï¼‰ï¼ŒModelå±‚ä¾ç„¶æ˜¯æœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ¨¡å‹ã€‚"),n("em",[n("strong",[e._v("è€ŒViewModelå……å½“äº†ä¸€ä¸ªUIé€‚é…å™¨çš„è§’è‰²ï¼Œä¹Ÿå°±æ˜¯è¯´Viewä¸­æ¯ä¸ªUIå…ƒç´ éƒ½åº”è¯¥åœ¨ViewModelæ‰¾åˆ°ä¸ä¹‹å¯¹åº”çš„å±æ€§ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä»ControlleræŠ½ç¦»å‡ºæ¥çš„ä¸UIæœ‰å…³çš„é€»è¾‘éƒ½æ”¾åœ¨äº†ViewModelä¸­ï¼Œè¿™æ ·å°±å‡è½»äº†Controllerçš„è´Ÿæ‹…ã€‚")])])]),e._v(" "),n("p",[e._v("æˆ‘ç®€å•çš„ç”»äº†ä¸‹MVVMçš„æ¶æ„å›¾ã€‚")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/Lobster-King/AppArticles/master/Architecture/mvvm-arch.png",alt:""}})]),e._v(" "),n("p",[e._v("ä»ä»¥ä¸Šçš„æ¶æ„å›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°çš„æ¢³ç†å‡ºå„è‡ªçš„åˆ†å·¥ã€‚")]),e._v(" "),n("ul",[n("li",[n("strong",[e._v("Viewå±‚")]),e._v("ï¼šè§†å›¾å±•ç¤ºã€‚åŒ…å«UIViewä»¥åŠUIViewControllerï¼ŒViewå±‚æ˜¯å¯ä»¥æŒæœ‰ViewModelçš„ã€‚")]),e._v(" "),n("li",[n("strong",[e._v("ViewModelå±‚")]),e._v("ï¼šè§†å›¾é€‚é…å™¨ã€‚æš´éœ²å±æ€§ä¸Viewå…ƒç´ æ˜¾ç¤ºå†…å®¹æˆ–è€…å…ƒç´ çŠ¶æ€ä¸€ä¸€å¯¹åº”ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ViewModelæš´éœ²çš„å±æ€§å»ºè®®æ˜¯readOnlyçš„ï¼Œè‡³äºä¸ºä»€ä¹ˆï¼Œæˆ‘ä»¬åœ¨å®æˆ˜ä¸­ä¼šå»è§£é‡Šã€‚è¿˜æœ‰ä¸€ç‚¹ï¼ŒViewModelå±‚æ˜¯å¯ä»¥æŒæœ‰Modelçš„ã€‚")]),e._v(" "),n("li",[n("strong",[e._v("Modelå±‚")]),e._v("ï¼šæ•°æ®æ¨¡å‹ä¸æŒä¹…åŒ–æŠ½è±¡æ¨¡å‹ã€‚æ•°æ®æ¨¡å‹å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä»æœåŠ¡å™¨æ‹‰å›æ¥çš„JSONæ•°æ®ã€‚è€ŒæŒä¹…åŒ–æŠ½è±¡æ¨¡å‹æš‚æ—¶æ”¾åœ¨Modelå±‚ï¼Œæ˜¯å› ä¸ºMVVMè¯ç”Ÿä¹‹åˆå°±æ²¡æœ‰å¯¹è¿™å—è¿›è¡Œå¾ˆç»†è‡´çš„æè¿°ã€‚æŒ‰ç…§ç»éªŒï¼Œæˆ‘ä»¬é€šå¸¸æŠŠæ•°æ®åº“ã€æ–‡ä»¶æ“ä½œå°è£…æˆModelï¼Œå¹¶å¯¹å¤–æä¾›æ“ä½œæ¥å£ã€‚ï¼ˆæœ‰äº›å…¬å¸æŠŠæ•°æ®å­˜å–æ“ä½œå•æ‹å‡ºæ¥ä¸€å±‚ï¼Œç§°ä¹‹ä¸º"),n("strong",[e._v("DataAdapterå±‚")]),e._v("ï¼Œæ‰€ä»¥åœ¨ä¸šå†…ä¼šæœ‰å¾ˆå¤šMVVMçš„å˜ç§ï¼Œä½†å…¶æœ¬è´¨ä¸Šéƒ½æ˜¯MVVMï¼‰ã€‚")]),e._v(" "),n("li",[n("strong",[e._v("Binder")]),e._v("ï¼šMVVMçš„çµé­‚ã€‚å¯æƒœåœ¨MVVMè¿™å‡ ä¸ªè‹±æ–‡å•è¯ä¸­å¹¶æ²¡æœ‰å®ƒçš„ä¸€å¸­ä¹‹åœ°ï¼Œå®ƒçš„æœ€ä¸»è¦ä½œç”¨æ˜¯åœ¨Viewå’ŒViewModelä¹‹é—´åšäº†åŒå‘æ•°æ®ç»‘å®šã€‚å¦‚æœMVVMæ²¡æœ‰Binderï¼Œé‚£ä¹ˆå®ƒä¸MVCçš„å·®å¼‚ä¸æ˜¯å¾ˆå¤§ã€‚")])]),e._v(" "),n("p",[e._v("æˆ‘ä»¬å‘ç°ï¼Œæ­£æ˜¯å› ä¸ºViewã€ViewModelä»¥åŠModelé—´çš„æ¸…æ™°çš„æŒæœ‰å…³ç³»ï¼Œæ‰€ä»¥åœ¨ä¸‰ä¸ªæ¨¡å—é—´çš„æ•°æ®æµè½¬æœ‰äº†å¾ˆå¥½çš„æ§åˆ¶ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("è¿™é‡Œç»™å¤§å®¶æ¨èä¸€ç¯‡åšæ–‡"),n("a",{attrs:{href:"http://www.cocoachina.com/ios/20160108/14911.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("çŒ¿é¢˜åº“iOSå®¢æˆ·ç«¯æ¶æ„è®¾è®¡"),n("OutboundLink")],1),e._v("ï¼Œå…¶æ¶æ„å›¾å¦‚ä¸‹ã€‚")])]),e._v(" "),n("p",[n("img",{attrs:{src:"https://raw.githubusercontent.com/Lobster-King/AppArticles/master/Architecture/%E7%8C%BF%E9%A2%98%E5%BA%93Arch.png",alt:""}})]),e._v(" "),n("p",[e._v("çŒ¿é¢˜åº“çš„æ¶æ„æœ¬è´¨ä¸Šä¸æ˜¯MVCä¹Ÿä¸æ˜¯MVVMï¼Œå®ƒæ˜¯ä¸¤ç§æ¶æ„æ¼”è¿›çš„ä¸€ç§æ¶æ„æ¨¡å¼ã€‚åšæ–‡ä¸­å¯¹äºMVCå’ŒMVVMçš„ä¼˜ç¼ºç‚¹åšäº†ç®€å•çš„ä»‹ç»ã€‚")]),e._v(" "),n("ul",[n("li",[e._v("MVCç¼ºç‚¹ï¼šMassive View Controllerï¼Œä¹Ÿå°±æ˜¯èƒ–VCã€‚")]),e._v(" "),n("li",[e._v("MVVMç¼ºç‚¹ï¼š1.å­¦ä¹ æˆæœ¬é«˜ã€‚2.DEBUGå›°éš¾ã€‚")])]),e._v(" "),n("p",[e._v("ä½†åšæ–‡ä¸­å…³äºMVVMçš„é˜è¿°æœ‰ä¸¤å¤„ç¬”è€…ä¸å¤ªèµåŒã€‚")]),e._v(" "),n("ul",[n("li",[e._v("MVVMç»ä¸ç­‰äºRACï¼Œæ‰€ä»¥MVVMå¹¶ä¸å­˜åœ¨DEBUGéš¾çš„é—®é¢˜ã€‚")]),e._v(" "),n("li",[e._v("MVVMæ­£æ˜¯å› ä¸ºè·ŸRACä¸å¯¹ç­‰ï¼Œæ‰€ä»¥åšæ–‡ä¸­â€œMVVMä¸€ä¸ªé¦–è¦çš„ç¼ºç‚¹æ˜¯ï¼ŒMVVMçš„å­¦ä¹ æˆæœ¬å’Œå¼€å‘æˆæœ¬éƒ½å¾ˆé«˜â€è¿™å¥è¯ä¹Ÿæ˜¯ä¸æˆç«‹çš„ã€‚")])]),e._v(" "),n("p",[e._v("MVVMæ¶æ„æœ¬èº«å¹¶ä¸å¤æ‚ï¼Œè€Œä¸”ä¸ç”¨RACæˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡KVOã€ç±»KVOçš„æ–¹å¼æ¥å¸®æˆ‘ä»¬å®ç°Viewå’ŒViewModelç»‘å®šå™¨åŠŸèƒ½ã€‚")]),e._v(" "),n("p",[e._v("å…³äºçŒ¿é¢˜åº“iOSå®¢æˆ·ç«¯æ¶æ„è®¾è®¡æ˜¯å¦åˆç†ï¼Œå› ä¸ºç¬”è€…ä¸äº†è§£å…¶å…·ä½“ä¸šåŠ¡ï¼Œæ‰€ä»¥ä¸èƒ½å¦„ä¸‹ç»“è®ºã€‚ä½†æ˜¯æœ‰ä¸€ç‚¹å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œ"),n("strong",[e._v("MVVM â‰  RAC")]),e._v("ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("ä¸€å¹´ä¸€åº¦çš„QAç¯èŠ‚æ¥äº†ã€‚")])]),e._v(" "),n("blockquote",[n("p",[e._v("Qï¼šViewå’ŒViewModelä¹‹é—´æ˜¯å¦ä¸€å®šè¦è§£è€¦ï¼Ÿ"),n("br"),e._v("\nAï¼šViewæŒæœ‰ViewModelï¼ŒViewModelä¸èƒ½æŒæœ‰Viewï¼ˆå³ViewModelä¸èƒ½ä¾èµ–UIKitä¸­ä»»ä½•ä¸œè¥¿ï¼‰ã€‚è¯´æ˜ç™½äº†å§ï¼ŸğŸ˜…  è§£è€¦æ˜¯æœ‰ä¸€å®šæˆæœ¬çš„ï¼Œä¸ç®¡æ˜¯é€šè¿‡Categoryæˆ–è€…ä¸­é—´ä»¶ï¼Œæ¶ˆæ¯é“¾æ¡éƒ½ä¼šæ— å½¢ä¹‹ä¸­å˜é•¿ï¼Œä¼šæœ‰ä¸€å®šçš„DEBUGæˆæœ¬ã€‚")]),e._v(" "),n("p",[e._v("Qï¼šä¸ºä»€ä¹ˆViewModelä¸èƒ½æŒæœ‰Viewï¼Ÿ"),n("br"),e._v("\nAï¼šè¿™ä¸ªå¾ˆå¥½ç†è§£å•Šå…„deiï¼Œä¸»è¦æœ‰ä¸¤æ–¹é¢åŸå› ï¼š1.ViewModelå¯æµ‹æ€§ï¼Œå³å•å…ƒæµ‹è¯•æ–¹ä¾¿è¿›è¡Œã€‚2.å›¢é˜Ÿäººå‘˜å¯åˆ†ç¦»å¼€å‘ï¼ˆViewå’ŒViewModelå¼€å‘å¯ä»¥æ˜¯ä¸¤ä¸ªäººåŒæ—¶è¿›è¡Œï¼‰ã€‚")])]),e._v(" "),n("h2",{attrs:{id:"mvvmç»“åˆrac"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvvmç»“åˆrac"}},[e._v("#")]),e._v(" MVVMç»“åˆRAC")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/ReactiveCocoa/ReactiveCocoa",target:"_blank",rel:"noopener noreferrer"}},[e._v("ReativeCocoa"),n("OutboundLink")],1),e._v("ç›¸ä¿¡å¤§å®¶å¹¶ä¸é™Œç”Ÿï¼Œè¿™ä¸ªå‡½æ•°å“åº”å¼æ¡†æ¶åœ¨Githubä¸­å·²ç»æœ‰å°†è¿‘2w star ã€‚RACæ˜¯ä¸ªéå¸¸ä¼˜ç§€çš„æ¡†æ¶ï¼Œå®ƒå¯ä»¥ç‹¬ç«‹äºMVVMè€Œå­˜åœ¨ã€‚**å¦‚æœåªæ˜¯æŠŠå®ƒç†è§£æˆMVVMä¸­Viewå’ŒViewModel Binderè§’è‰²çš„è¯ï¼Œé‚£å°±æœ‰ç‚¹å¤§æå°ç”¨äº†ã€‚**æœ¬æ–‡ä¸ä¼šå¯¹RACè¿›è¡Œå±•å¼€åˆ†æï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œå®è·µä¸€ä¸‹ã€‚")]),e._v(" "),n("p",[e._v("RACç‰¹ç‚¹ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("è¯­æ³•æ€ªå¼‚ï¼Œæ‚äº¤ç§ã€‚ï¼ˆå‡½æ•°å¼+å“åº”å¼ç¼–ç¨‹ç»„åˆï¼‰")]),e._v(" "),n("li",[e._v("ä¸‡ç‰©çš†å¯ç›˜ã€‚ï¼ˆäº‹ä»¶ä¿¡å·RACSignalè´¯ç©¿æ•´ä¸ªæ¡†æ¶ï¼‰")]),e._v(" "),n("li",[e._v("æŠŠç¦»æ•£çš„å‡½æ•°è°ƒç”¨æ’ºæˆä¸€å¨ğŸ’©ã€‚ï¼ˆä¸ªäººæ„Ÿè§‰è·ŸPromiseå¾ˆåƒï¼‰")])]),e._v(" "),n("p",[n("strong",[e._v("æ€»ç»“ï¼šRACæ˜¯ä¸€ç§ç¼–ç¨‹æ€ç»´çš„æ”¹å˜ï¼Œæ‰€ä»¥å…¶ç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼Œå­¦ä¹ æˆæœ¬å¾ˆå¤§ï¼ï¼ï¼")])]),e._v(" "),n("p",[e._v("å…·ä½“RACçš„ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œè‡ªè¡Œå®è·µä¸€ä¸‹ï¼Œè¿™é‡Œä¸å†å±•å¼€ã€‚")]),e._v(" "),n("h2",{attrs:{id:"mvvmç»“åˆérac-iqdatabinding"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mvvmç»“åˆérac-iqdatabinding"}},[e._v("#")]),e._v(" MVVMç»“åˆéRACï¼ˆ"),n("a",{attrs:{href:"https://github.com/Lobster-King/IQDataBinding",target:"_blank",rel:"noopener noreferrer"}},[e._v("IQDataBinding"),n("OutboundLink")],1),e._v("ï¼‰")]),e._v(" "),n("p",[e._v("é€šè¿‡MVVMæ‰«ç›²éƒ¨åˆ†ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼ŒBinderåœ¨MVVMä¸­æ‰®æ¼”äº†Viewå’ŒViewModelæ•°æ®é€šä¿¡è€…çš„è§’è‰²ã€‚")]),e._v(" "),n("p",[e._v("äº†è§£è¿‡Androidå¼€å‘çš„åŒå­¦éƒ½çŸ¥é“ï¼ŒJavaæœ‰ä¸ªå¥½ä¸œè¥¿ï¼Œé‚£å°±æ˜¯"),n("strong",[e._v("æ³¨è§£ï¼ˆAnnotationï¼‰")]),e._v("ã€‚åœ¨å¼€å‘Android Appçš„æ—¶å€™ï¼Œå¯ä»¥åœ¨XMLä¸­é€šè¿‡æ³¨è§£çš„æ–¹å¼æ ‡è®°Viewå’ŒViewModelçš„ç»‘å®šå…³ç³»ã€‚ç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šè‡ªåŠ¨ç”ŸæˆXMLå’ŒViewModelçš„ç»‘å®šç±»ï¼ˆBinderï¼‰ã€‚")]),e._v(" "),n("p",[e._v("æ³¨è§£åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬iOSï¼ˆObjective-Cï¼‰æ²¡æœ‰ï¼ï¼ï¼Swiftæœ‰æ²¡æœ‰æ³¨è§£ç¬”è€…ä¸å¤ªæ¸…æ¥šï¼Œæœ‰çŸ¥é“çš„ç«¥é‹å¯ä»¥å‘Šè¯‰æˆ‘ä¸€ä¸‹ã€‚")]),e._v(" "),n("p",[e._v("æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¸€æ­¥æ­¥å®ç°ä¸€ä¸ªViewå’ŒViewModelåŒå‘ç»‘å®šçš„æ¡†æ¶ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("æ–¹æ¡ˆä¸€ï¼šâ€œèººçˆ½æ³•â€")])]),e._v(" "),n("blockquote",[n("p",[e._v("åæ¬¡è§£é‡Šï¼šæ‰€è°“â€œèººçˆ½æ³•â€ï¼ˆå®åœ¨æƒ³ä¸å‡ºç”¨ä»€ä¹ˆè¯æè¿°è¿™ç§æœ€åŸºç¡€çš„æ–¹æ³•äº†ğŸ˜…ï¼‰å’ŒKVOï¼Œæ˜¯ç›¸å¯¹äºViewModel >>> Viewè€Œè¨€çš„ã€‚")])]),e._v(" "),n("p",[e._v("1.ViewModel >>> Viewï¼šViewä¸éœ€è¦å…³å¿ƒViewModelå±æ€§çš„æ”¹å˜ï¼ŒViewåªéœ€è¦æä¾›æ›´æ–°è§†å›¾çš„æ¥å£å³å¯ï¼ŒViewModelå±æ€§æ”¹å˜ä¹‹åè°ƒç”¨Viewæä¾›çš„APIæ›´æ–°è§†å›¾ã€‚æ‰€ä»¥Viewè¿™é‡Œæ²¡æœ‰åšè¿‡å¤šçš„äº‹æƒ…ï¼Œä¸€åˆ‡éƒ½æ˜¯è¢«åŠ¨è§¦å‘ï¼Œæ‰€ä»¥æˆ‘ç§°ä½œæ˜¯â€œèººçˆ½æ³•â€ã€‚")]),e._v(" "),n("p",[e._v("2.View >>> ViewModelï¼šç”¨æˆ·æ“ä½œè§†å›¾ï¼Œæ¯”å¦‚ä¸€ä¸ªå¼€å…³æŒ‰é’®ï¼Œè¿™æ—¶å€™è¦åŒæ­¥ç»™ViewModelã€‚æˆ‘ä»¬çŸ¥é“Viewæ˜¯å¯ä»¥æŒæœ‰ViewModelçš„ï¼Œæ‰€ä»¥åœ¨Viewä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿åˆ°ViewModelæŒ‡é’ˆï¼Œè¿›è€Œé€šè¿‡ViewModelæš´éœ²çš„æ–¹æ³•è€Œæ›´æ–°å€¼ã€‚")]),e._v(" "),n("blockquote",[n("p",[e._v("é«˜èƒ½é¢„è­¦ï¼šè¿™ç§æœ€åŸºç¡€çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯MVCï¼ï¼ï¼ä»–æœ¬èº«æ²¡æœ‰è§£å†³**â€œMassive View Controllerâ€**é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸ºäº†ViewModelä¸­ä¸ä¾èµ–äºViewï¼Œå¿…é¡»é€šè¿‡Controllerä¸­è½¬ï¼Œä¾ç„¶ä¼šæœ‰ä¸€å †èƒ¶æ°´ä»£ç ã€‚**æ‰€ä»¥è¿™ç§è§£å†³æ–¹æ¡ˆå¹¶ä¸æ˜¯MVVMï¼ï¼ï¼**ä¸æ˜¯æ•…æ„ç»™å¤§å®¶æŒ–å‘ï¼Œåªæ˜¯æ„åœ¨æé†’å¤§å®¶ï¼Œé˜…è¯»æ–‡ç« çš„æ—¶å€™è¦ä¸¾ä¸€åä¸‰ï¼Œæ›´ä¸è¦è¢«ä¸€äº›è„ä¹±å·®çš„æ–‡ç« æ··æ·†è§†å¬ğŸ˜…ğŸ˜…ğŸ˜…ã€‚")])]),e._v(" "),n("p",[n("strong",[e._v("æ–¹æ¡ˆä¸€ï¼šKVO")])]),e._v(" "),n("p",[e._v("1.ViewModel >>> Viewï¼šViewModelå±æ€§æ”¹å˜ä¹‹åï¼Œé€šçŸ¥Viewè¿›è¡Œè§†å›¾å¸ƒå±€ã€‚è¿™ç§æœ€ç†Ÿæ‚‰ä¸è¿‡ï¼Œé€šè¿‡KVOå³å¯å®ç°ã€‚")]),e._v(" "),n("p",[e._v("2.View >>> ViewModelï¼šç”¨æˆ·æ“ä½œè§†å›¾ï¼Œé€šè¿‡ViewModelæš´éœ²çš„æ›´æ–°æ–¹æ³•è€Œæ›´æ–°å€¼ï¼ˆè®¾ç½®å±æ€§å€¼æ—¶è¦é¿å¼€è§¦å‘KVOç›‘å¬ï¼Œå¦åˆ™ä¼šå‡ºç°æ­»å¾ªç¯ï¼‰ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("Talk is cheap,show me the code!")]),n("br"),e._v("\næˆ‘ä»¬ä»¥å¤§å®¶æœ€ç†Ÿæ‚‰çš„Cellä¸¾ä¾‹å­ã€‚"),n("br"),e._v(" "),n("strong",[e._v("ViewModel")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//\n//  IQMVVMDemoViewModel.h\n//\n#import <Foundation/Foundation.h>\n\nNS_ASSUME_NONNULL_BEGIN\n\n@interface IQMVVMDemoViewModel : NSObject\n\n@property (nonatomic, copy, readonly) NSString *userName;\n@property (nonatomic, copy, readonly) NSString *userPwd;\n\n+ (IQMVVMDemoViewModel *)demoViewWithName:(NSString *)userName withPwd:(NSString *)userPwd;\n- (void)updateViewModelWithName:(NSString *)userName withPwd:(NSString *)userPwd;\n\n@end\n\nNS_ASSUME_NONNULL_END\n\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('//\n//  IQMVVMDemoViewModel.m\n//  \n\n#import "IQMVVMDemoViewModel.h"\n\n@interface IQMVVMDemoViewModel ()\n\n@property (nonatomic, copy, readwrite) NSString *userName;\n@property (nonatomic, copy, readwrite) NSString *userPwd;\n\n@end\n\n@implementation IQMVVMDemoViewModel\n\n+ (IQMVVMDemoViewModel *)demoViewWithName:(NSString *)userName withPwd:(NSString *)userPwd {\n    IQMVVMDemoViewModel *viewModel = [[IQMVVMDemoViewModel alloc]init];\n    viewModel.userName  = userName;\n    viewModel.userPwd   = userPwd;\n    return viewModel;\n}\n\n- (void)updateViewModelWithName:(NSString *)userName withPwd:(NSString *)userPwd {\n    _userName   = userName;\n    _userPwd    = userPwd;\n}\n\n@end\n')])])]),n("p",[n("strong",[e._v("View")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("//\n//  IQMVVMDemoView.h\n//  \n#import <UIKit/UIKit.h>\n\nNS_ASSUME_NONNULL_BEGIN\n\n@class IQMVVMDemoViewModel;\n\n@interface IQMVVMDemoView : UITableViewCell\n\n- (void)updateViewWithViewModel:(IQMVVMDemoViewModel *)viewModel;\n\n@end\n\nNS_ASSUME_NONNULL_END\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('//\n//  IQMVVMDemoView.m\n//  \n\n#import "IQMVVMDemoView.h"\n#import "IQMVVMDemoViewModel.h"\n\n@interface IQMVVMDemoView ()<UITextFieldDelegate>\n\n@property (nonatomic, strong) UITextField *userNameField;\n@property (nonatomic, strong) UITextField *userPwdField;\n@property (nonatomic, strong) IQMVVMDemoViewModel *viewModel;\n\n@end\n\n@implementation IQMVVMDemoView\n\n#pragma mark--Life Cycle--\n- (void)dealloc {\n    [self.viewModel removeObserver:self forKeyPath:@"userName"];\n    [self.viewModel removeObserver:self forKeyPath:@"userPwd"];\n}\n\n- (instancetype)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {\n    if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {\n        [self setupSubviews];\n    }\n    return self;\n}\n\n#pragma Public & Private Methods--\n- (void)setupSubviews {\n    [self.contentView addSubview:self.userNameField];\n    [self.contentView addSubview:self.userPwdField];\n    /*\n     è¿™é‡Œåšå¸ƒå±€ï¼Œä¸å†™äº†å•Š\n     */\n}\n\n- (void)updateViewWithViewModel:(IQMVVMDemoViewModel *)viewModel {\n    self.viewModel = viewModel;\n    [self.viewModel addObserver:self forKeyPath:@"userName" options:NSKeyValueObservingOptionNew context:NULL];\n    [self.viewModel addObserver:self forKeyPath:@"userPwd" options:NSKeyValueObservingOptionNew context:NULL];\n}\n\n#pragma mark--Delegates & KVO--\n- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary<NSKeyValueChangeKey,id> *)change context:(void *)context {\n    if ([keyPath isEqualToString:@"userName"]) {\n        self.userNameField.text = change[NSKeyValueChangeNewKey];\n    } else if([keyPath isEqualToString:@"userPwd"]) {\n        self.userPwdField.text = change[NSKeyValueChangeNewKey];\n    }\n}\n\n- (void)textFieldDidEndEditing:(UITextField *)textField {\n    /*æ›´æ–°ViewModel*/\n    if (textField == self.userNameField) {\n        self.userNameField.text = textField.text;\n    } else {\n        self.userPwdField.text = textField.text;\n    }\n    [self.viewModel updateViewModelWithName:self.userNameField.text withPwd:self.userPwdField.text];\n}\n\n#pragma mark--Getters & Setters--\n- (UITextField *)userNameField {\n    if (!_userNameField) {\n        _userNameField = [[UITextField alloc]init];\n        _userNameField.delegate = self;\n    }\n    return _userNameField;\n}\n\n- (UITextField *)userPwdField {\n    if (!_userPwdField) {\n        _userPwdField = [[UITextField alloc]init];\n        _userPwdField.delegate = self;\n    }\n    return _userPwdField;\n}\n\n\n@end\n\n')])])]),n("p",[e._v("è‡³æ­¤ï¼Œæˆ‘ä»¬å¤§è‡´æŠŠViewå’ŒViewModelä¹‹é—´æ•°æ®é€šä¿¡æ–¹å¼ç»™ç†æ¸…äº†ã€‚ä½†æ˜¯å¤§å®¶éƒ½çŸ¥é“KVOå­˜åœ¨å„ç§é—®é¢˜ï¼Œè€Œä¸”æ¯æ¬¡ç›‘å¬ä¸€ä¸ªå±æ€§éƒ½è¦å†™å¤§é‡çš„ä»£ç ï¼ˆæ³¨å†Œã€ç§»é™¤ã€æ”¶åˆ°ç›‘å¬çš„å¤„ç†ï¼‰ã€‚æ‰€ä»¥æ–¹æ¡ˆä¸€å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š")]),e._v(" "),n("ul",[n("li",[e._v("ç›´æ¥ä½¿ç”¨KVOæ–¹å¼ï¼Œæ¯æ¬¡éƒ½è¦å†™å¤§é‡çš„æ³¨å†Œã€ç§»é™¤ç­‰ä»£ç ï¼Œæ²¡æœ‰åšåˆ°è‡ªåŠ¨ç§»é™¤ã€‚")]),e._v(" "),n("li",[e._v("å¦‚æœæ²¡æœ‰ç§»é™¤ç›‘å¬å¯èƒ½ç›´æ¥å¯¼è‡´Crashï¼Œä½¿ç”¨å§¿åŠ¿ä¸æ–¹ä¾¿ã€‚")])]),e._v(" "),n("p",[n("strong",[e._v("æ–¹æ¡ˆäºŒï¼šç±»KVOï¼ˆIQDataBindingï¼‰")])]),e._v(" "),n("blockquote",[n("p",[e._v("åè¯è§£é‡Šï¼šä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºç±»KVOï¼Œæ˜¯å› ä¸ºæ–¹æ¡ˆäºŒæœ¬è´¨ä¸Šæ˜¯é€šè¿‡KVOæ¥å®ç°çš„ã€‚ä¸è¿‡IQDataBindingå®ç°äº†è‡ªåŠ¨ç§»é™¤ï¼Œä¸”æ”¯æŒå‡½æ•°å¼ã€é“¾å¼è°ƒç”¨ï¼Œä½¿ç”¨å§¿åŠ¿æ¯”è¾ƒä¼˜é›…ã€‚")])]),e._v(" "),n("p",[e._v("ç©ºè¯´æ— å‡­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹IQDataBindingå¦‚ä½•ä½¿ç”¨")]),e._v(" "),n("p",[n("strong",[e._v("Controller")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('/*å¼•å…¥NSObject+IQDataBindingå¤´æ–‡ä»¶*/\n- (void)configData {\n    self.contentModel = [[ContentModel alloc]init];\n    self.contentModel.title = @"lobster";\n    self.contentModel.content = @"123456";\n    \n    /*Viewå’ŒViewModelä¹‹é—´ç»‘å®š*/\n    [self.contentView bindModel:self.contentModel];\n    \n}\n\n')])])]),n("p",[n("strong",[e._v("View")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('/*ViewModel >>> View*/\n- (void)setUpSubviews {\n    \n\n    [self addSubview:self.loginTextField];\n    [self addSubview:self.pwdTextField];\n    \n    self.loginTextField.frame = CGRectMake(0, 0, self.bounds.size.width, 30);\n    self.pwdTextField.frame = CGRectMake(0, 40, self.bounds.size.width, 30);\n    \n    /*ç»‘å®šViewModelä¸­titleå’Œcontentå±æ€§ï¼Œå‘ç”Ÿæ”¹å˜è‡ªåŠ¨è§¦å‘Viewæ›´æ–°æ“ä½œ*/\n    __weak typeof(self)weakSelf = self;\n    self.bind(@"title",^(id value){\n        weakSelf.loginTextField.text = value;\n    }).bind(@"content",^(id value){\n        weakSelf.pwdTextField.text = value;\n    });\n    \n}\n    \n')])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('/*View >>> ViewModel*/\n- (BOOL)textFieldShouldReturn:(UITextField *)textField {\n    [textField resignFirstResponder];\n    if (textField.text) {\n        /*å‡½æ•°å¼è°ƒç”¨*/\n        self.update(@"content",textField.text).update(@"title",@"lobster");\n    }\n    return YES;\n}\n')])])]),n("p",[n("strong",[e._v("IQDataBindingè¸©å‘è®°ï¼š")])]),e._v(" "),n("ul",[n("li",[e._v("Viewæ›´æ–°ViewModelå±æ€§æ—¶ï¼Œå¦‚ä½•è®©ä¸€ä¸ªå‡½æ•°æ”¯æŒä¼ è¾“ä¸åŒçš„æ•°æ®ç±»å‹ï¼Ÿ")]),e._v(" "),n("li",[e._v("Viewæ›´æ–°ViewModelæ—¶ï¼Œå¦‚ä½•é¿å…è§¦å‘KVOè€Œå¯¼è‡´æ­»å¾ªç¯ï¼Ÿ")]),e._v(" "),n("li",[e._v("å¦‚ä½•è‡ªåŠ¨ç§»é™¤KVOï¼Ÿ")])]),e._v(" "),n("p",[n("strong",[e._v("Viewæ›´æ–°ViewModelå±æ€§æ—¶ï¼Œå¦‚ä½•è®©ä¸€ä¸ªå‡½æ•°æ”¯æŒä¼ è¾“ä¸é€šçš„æ•°æ®ç±»å‹ï¼Ÿ")])]),e._v(" "),n("p",[e._v("ç¬”è€…å€Ÿé‰´äº†Masonryæ¡†æ¶çš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡å®å®šä¹‰+ä¸å®šå‚æ•°è§£å†³äº†ä¼ è¾“ä¸é€šæ•°æ®ç±»å‹çš„é—®é¢˜ã€‚æ„Ÿå…´è¶£çš„å¯ä»¥äº†è§£ä¸‹Masonryä¸­_MASBoxValueè¿™ä¸ªå‡½æ•°ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("Viewæ›´æ–°ViewModelæ—¶ï¼Œå¦‚ä½•é¿å…è§¦å‘KVOè€Œå¯¼è‡´æ­»å¾ªç¯ï¼Ÿ")])]),e._v(" "),n("p",[e._v("å¾ˆæ˜¾ç„¶ï¼Œé€šè¿‡setValue:forKey:å‡½æ•°ä¼šè§¦å‘KVOå›è°ƒï¼Œæ‰€ä»¥æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯è·å–åˆ°IVarï¼Œç›´æ¥è®¾ç½®å®ä¾‹å˜é‡çš„å€¼ã€‚ä½†æ˜¯object_setIvar(id _Nullable obj, Ivar _Nonnull ivar, id _Nullable value) å‡½æ•°ï¼Œåªæ¥æ”¶idç±»å‹çš„å€¼ã€‚Stack OverflowæŸ¥è¯¢ä¹‹åï¼Œå‘ç°å¯ä»¥é€šè¿‡å‡½æ•°ç±»å‹å¼ºè½¬çš„æ–¹å¼æ¥è§£å†³ã€‚")]),e._v(" "),n("p",[n("strong",[e._v("å¦‚ä½•è‡ªåŠ¨ç§»é™¤KVOï¼Ÿ")])]),e._v(" "),n("p",[e._v("è¿™ä¸ªé—®é¢˜å°±æ¯”è¾ƒç®€å•äº†ï¼Œä¸ºäº†ç›‘æ§Viewçš„deallocå‡½æ•°è°ƒç”¨æ—¶æœºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Hookçš„æ–¹å¼ï¼Œä½†æ˜¯Hookä¸å¤ªæ¨èã€‚å°¤å…¶ä½¿ç”¨ç±»ä¼¼äºAspectsï¼ˆé€šè¿‡æ¶ˆæ¯è½¬å‘æ¥å®ç°ï¼Œä»£ä»·å¾ˆé«˜ï¼‰è¿›è¡ŒHookæ—¶ï¼Œå¯¹äºé‚£ç§ä¸€ç§’é’Ÿè°ƒç”¨è¶…è¿‡1000æ¬¡çš„ä¸šåŠ¡åœºæ™¯ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚æ‰€ä»¥æˆ‘é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡ç»™Viewæ·»åŠ ä¸€ä¸ªå…³è”å¯¹è±¡æ¥è§£å†³ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“å¯¹è±¡é‡Šæ”¾æ—¶ä¼šå…ˆé‡Šæ”¾æˆå‘˜å˜é‡ï¼Œç„¶åå†é‡Šæ”¾å…³è”å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨å…³è”å¯¹è±¡çš„deallocæ–¹æ³•é‡Œå¯¹è§‚å¯Ÿè€…è¿›è¡Œè‡ªåŠ¨ç§»é™¤ã€‚")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v(" /*ç»™viewæ·»åŠ ä¸€ä¸ªå…³è”å¯¹è±¡IQWatchDogï¼ŒIQWatchDogèŒè´£å¦‚ä¸‹\n     1.å­˜å‚¨@{ç»‘å®šçš„Keyï¼Œå›è°ƒBlock}å¯¹åº”å…³ç³»ã€‚\n     2.æ ¹æ®@{ç»‘å®šçš„Keyï¼Œå›è°ƒBlock}ä¸­çš„Keyï¼Œè¿›è¡ŒKVOç›‘å¬ã€‚\n     3.ç›‘å¬view Deallocäº‹ä»¶ï¼Œè‡ªåŠ¨ç§»é™¤KVOç›‘å¬ã€‚\n     */\n    IQWatchDog *viewAssociatedModel = objc_getAssociatedObject(self, &kViewAssociatedModelKey);\n    if (!viewAssociatedModel) {\n        viewAssociatedModel = [[IQWatchDog alloc]init];\n        viewAssociatedModel.target = model;\n        objc_setAssociatedObject(self, &kViewAssociatedModelKey, viewAssociatedModel, OBJC_ASSOCIATION_RETAIN_NONATOMIC);\n    }\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('@interface IQWatchDog : NSObject\n\n@property (nonatomic, weak) id target;\n@property (nonatomic, strong) NSMutableDictionary *keyPathsAndCallBacks;\n\n@end\n\n@implementation IQWatchDog\n\n- (void)dealloc {\n    [self.keyPathsAndCallBacks enumerateKeysAndObjectsUsingBlock:^(id  _Nonnull key, id  _Nonnull obj, BOOL * _Nonnull stop) {\n        [self.target removeObserver:self forKeyPath:key];\n    }];\n}\n\n- (void)observeKeyPath:(NSString *)keyPath callBack:(observerCallBack)callBack {\n    NSAssert(keyPath.length, @"keyPathä¸åˆæ³•");\n    /*åŠ è½½é»˜è®¤å€¼*/\n    id value = [self.target valueForKeyPath:keyPath];\n    if (value) {\n        callBack(value);\n    }\n    /*æ·»åŠ è§‚å¯Ÿè€…*/\n    [self.keyPathsAndCallBacks setObject:callBack forKey:keyPath];\n    [self.target addObserver:self forKeyPath:keyPath options:NSKeyValueObservingOptionNew context:NULL];\n}\n\n- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary<NSKeyValueChangeKey,id> *)change context:(void *)context {\n    observerCallBack callBack = self.keyPathsAndCallBacks[keyPath];\n    if (callBack) {\n        callBack(change[NSKeyValueChangeNewKey]);\n    }\n}\n\n- (void)removeAllObservers {\n    [self.keyPathsAndCallBacks enumerateKeysAndObjectsUsingBlock:^(id  _Nonnull key, id  _Nonnull obj, BOOL * _Nonnull stop) {\n        [self.target removeObserver:self forKeyPath:key];\n    }];\n}\n\n- (NSMutableDictionary *)keyPathsAndCallBacks {\n    if (!_keyPathsAndCallBacks) {\n        _keyPathsAndCallBacks = [NSMutableDictionary dictionary];\n    }\n    return _keyPathsAndCallBacks;\n}\n\n@end\n\n')])])]),n("p",[n("strong",[e._v("å†å›å¿†ä¸‹å¯¹è±¡çš„é‡Šæ”¾è¿‡ç¨‹")])]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("/*å¯¹è±¡åœ¨é‡Šæ”¾æ—¶ï¼Œæœ€ç»ˆéƒ½ä¼šèµ°åˆ°è¿™ä¸ªå‡½æ•°*/\nvoid *objc_destructInstance(id obj) \n{\n    if (obj) {\n        // Read all of the flags at once for performance.\n        bool cxx = obj->hasCxxDtor();\n        bool assoc = obj->hasAssociatedObjects();\n\n        // This order is important.\n        if (cxx) object_cxxDestruct(obj);/*å¦‚æœæœ‰æˆå‘˜å˜é‡ï¼Œåˆ™å…ˆé‡Šæ”¾æˆå‘˜å˜é‡*/\n        if (assoc) _object_remove_assocations(obj);/*å¦‚æœæœ‰å…³è”å¯¹è±¡ï¼Œåˆ™é‡Šæ”¾å…³è”å¯¹è±¡*/\n        obj->clearDeallocating();/*æ¸…é™¤SideTableä¸­weakå¼•ç”¨è¡¨ï¼Œå¹¶æŠŠæŒ‡å‘è¯¥å¯¹è±¡çš„æŒ‡é’ˆç½®ä¸ºnil*/\n    }\n\n    return obj;\n}\n")])])]),n("p",[n("strong",[e._v("GitHubåœ°å€ï¼š"),n("a",{attrs:{href:"https://github.com/Lobster-King/IQDataBinding",target:"_blank",rel:"noopener noreferrer"}},[e._v("IQDataBindingï¼Œä¸€ä¸ªViewå’ŒViewModelåŒå‘ç»‘å®šçš„æ¡†æ¶"),n("OutboundLink")],1)])]),e._v(" "),n("p",[n("strong",[e._v("é™¤æ­¤ä¹‹å¤–ï¼Œå†æ¨èä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„æ¡†æ¶ï¼š"),n("a",{attrs:{href:"https://github.com/facebook/KVOController",target:"_blank",rel:"noopener noreferrer"}},[e._v("KVOController"),n("OutboundLink")],1)]),e._v("  Simple, modern, thread-safe key-value observing for iOS and OS X.")]),e._v(" "),n("h2",{attrs:{id:"å¯¹äºå¼€å‘è€…çš„å»ºè®®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¯¹äºå¼€å‘è€…çš„å»ºè®®"}},[e._v("#")]),e._v(" å¯¹äºå¼€å‘è€…çš„å»ºè®®")]),e._v(" "),n("ul",[n("li",[e._v("ä¸ç®¡æ˜¯æ–°ã€è€å›¢é˜Ÿï¼Œè¿˜æ˜¯æ–°ã€è€é¡¹ç›®ï¼Œæˆ‘éƒ½å¼ºçƒˆå»ºè®®å¤§å®¶å°è¯•MVVMæ¶æ„ï¼Œå†æ¬¡å¼ºè°ƒçš„æ˜¯ï¼š"),n("strong",[e._v("MVVM â‰  RAC")]),e._v("ã€‚")]),e._v(" "),n("li",[e._v("å¯¹äºå›¢é˜Ÿæˆå‘˜ä¼—å¤šï¼Œé¡¹ç›®é—ç•™é—®é¢˜å¤šçš„å›¢é˜Ÿæ¥è¯´ï¼Œæˆ‘å»ºè®®å¤§å®¶å°è¯•MVVM+KVO+æ•°æ®å­˜å–æ”¾åˆ°Modelå±‚çš„æ¶æ„æ–¹æ¡ˆã€‚")]),e._v(" "),n("li",[e._v("ä¸å¯å¦è®¤çš„æ˜¯ï¼ŒRACæ˜¯ä¸ªç‰¹åˆ«ä¼˜ç§€çš„æ¡†æ¶ï¼Œä½†æ˜¯è½åœ°æ¯”è¾ƒéš¾ï¼Œå°¤å…¶åœ¨ä¸­å›½ã€‚")]),e._v(" "),n("li",[e._v("ä¸ç®¡å“ªç§æ¶æ„æ–¹å¼ï¼Œæ‰§è¡Œè½åœ°éƒ½ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ã€‚å¯¹äºMVVMï¼Œæˆ‘å»ºè®®é‡‡ç”¨åˆ†æ­¥èµ°çš„ç­–ç•¥ï¼Œå³æ–°åŠŸèƒ½ç”¨MVVMå¼€å‘ï¼Œè€æ—§ä»£ç åˆ†æ­¥é‡æ„ã€‚è€Œä¸”è¦å¼•å…¥ä¸€äº›æ‰‹æ®µå¯¹ä»£ç è¿›è¡Œé™æ€æ£€æŸ¥ï¼Œç„¶åä¸€æ­¥æ­¥æŠŠMVVMè½åˆ°å®å¤„ã€‚å†æ¨èç‚¹å¹²è´§"),n("a",{attrs:{href:"http://yulingtianxia.com/blog/2019/01/27/MVVM-Rules-for-OCLint/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ä½¿ç”¨ OCLint è‡ªå®šä¹‰ MVVM è§„åˆ™"),n("OutboundLink")],1),e._v("ã€‚")])]),e._v(" "),n("p",[n("strong",[e._v("æ–‡ç« é¦–å‘GitHub "),n("a",{attrs:{href:"https://github.com/Lobster-King/AppArticles",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/Lobster-King/AppArticles"),n("OutboundLink")],1)])]),e._v(" "),n("p",[n("a",{attrs:{href:"https://www.vultr.com/?ref=7766366"}},[n("img",{attrs:{src:"https://www.vultr.com/media/banner_2.png",width:"468",height:"60"}})])])])}),[],!1,null,null,null);t.default=o.exports}}]);